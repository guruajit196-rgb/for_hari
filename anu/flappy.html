<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><b>FLAPPY BIRD</b></title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #70c5ce;
            text-align: center;
        }
        canvas {
            display: block;
            margin: auto;
            background: #70c5ce;
        }
    </style>
</head>
<body>

<canvas id="game" width="400" height="600"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

/* ---------- Assets ---------- */
const birdImg = new Image();
birdImg.src = "hari.jpeg";

const pipeImg = new Image();
pipeImg.src = "anu.jpeg";

const jumpSound = new Audio("p.mp3");
const loseSound = new Audio("p1.mp3");

/* ---------- Game Variables ---------- */
let bird = {
    x: 80,
    y: 200,
    width: 100,
    height: 100,
    gravity: 0.5,
    lift: -8,
    velocity: 0
};

let pipes = [];
let frame = 0;
let gameOver = false;

/* ---------- Controls ---------- */
document.addEventListener("keydown", jump);
document.addEventListener("click", jump);

function jump() {
    if (!gameOver) {
        bird.velocity = bird.lift;
        jumpSound.currentTime = 0;
        jumpSound.play();
    }
}

/* ---------- Pipes ---------- */
function createPipe() {
    let gap = 300;
    let topHeight = Math.random() * 250 + 60;

    pipes.push({
        x: canvas.width,
        top: topHeight,
        bottom: topHeight + gap,
        width: 80
    });
}

/* ---------- Collision ---------- */
function hitPipe(pipe) {
    return (
        bird.x < pipe.x + pipe.width &&
        bird.x + bird.width > pipe.x &&
        (bird.y < pipe.top || bird.y + bird.height > pipe.bottom)
    );
}

/* ---------- Game Loop ---------- */
function draw() {
    if (gameOver) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    /* Bird physics */
    bird.velocity += bird.gravity;
    bird.y += bird.velocity;

    /* Draw bird */
    ctx.drawImage(birdImg, bird.x, bird.y, bird.width, bird.height);

    /* Create pipes */
    if (frame % 90 === 0) {
        createPipe();
    }

    /* Draw pipes */
    pipes.forEach(pipe => {
        pipe.x -= 2;

        // Top pipe
        ctx.drawImage(
            pipeImg,
            pipe.x,
            pipe.top - 400,
            pipe.width,
            400
        );

        // Bottom pipe
        ctx.drawImage(
            pipeImg,
            pipe.x,
            pipe.bottom,
            pipe.width,
            400
        );

        if (hitPipe(pipe)) {
            endGame();
        }
    });

    /* Remove old pipes */
    pipes = pipes.filter(pipe => pipe.x + pipe.width > 0);

    /* Ground / ceiling collision */
    if (bird.y + bird.height > canvas.height || bird.y < 0) {
        endGame();
    }

    frame++;
    requestAnimationFrame(draw);
}

/* ---------- End Game ---------- */
function endGame() {
    if (!gameOver) {
        gameOver = true;
        loseSound.play();

        ctx.fillStyle = "black";
        ctx.font = "30px Arial";
        ctx.fillText("Game Over ðŸ˜­", 100, 300);
        ctx.font = "16px Arial";
        ctx.fillText("Refresh to Play Again", 115, 340);
    }
}

/* ---------- Start ---------- */
draw();
</script>

</body>
</html>
